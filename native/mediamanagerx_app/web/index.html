<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MediaManagerX</title>
  <link rel="icon" type="image/png" href="favicon.png" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div id="app">
    <header>
      <div class="header-top">
        <div class="brand">
          <img src="media-manager-logo-64.png" alt="" class="logo" id="mainLogo" />
          MediaManagerX
        </div>
        <div class="search">
          <input id="searchInput" class="search-input" placeholder="Search‚Ä¶" />
        </div>
        <div class="controls">
          <div class="custom-select" id="sortSelect" tabindex="0">
            <div class="select-trigger">Sort: Name (A-Z)</div>
            <div class="select-options">
              <div data-value="name_asc" class="selected">Name (A-Z)</div>
              <div data-value="name_desc">Name (Z-A)</div>
              <div data-value="date_desc">Date (Newest)</div>
              <div data-value="date_asc">Date (Oldest)</div>
              <div data-value="size_desc">Size (Largest)</div>
              <div data-value="size_asc">Size (Smallest)</div>
            </div>
          </div>
          <div class="custom-select" id="filterSelect" tabindex="0">
            <div class="select-trigger">Filter: All Types</div>
            <div class="select-options">
              <div data-value="all" class="selected">All Types</div>
              <div data-value="image">Images</div>
              <div data-value="video">Videos</div>
              <div data-value="animated">Animated</div>
            </div>
          </div>
          <button class="icon-btn" id="toggleLeftPanel" title="Toggle Left Sidebar">
            <img src="left-sidebar-opened.png" alt="" id="iconLeftPanel" />
          </button>
          <button class="icon-btn" id="toggleRightPanel" title="Toggle Right Sidebar">
            <img src="right-sidebar-opened.png" alt="" id="iconRightPanel" />
          </button>
          <button class="icon-btn" id="openSettings" title="Settings">‚öô</button>
        </div>
      </div>

      <div class="toolbar" data-pager>
        <div class="kv">
          <div class="k">Selected folder</div>
          <div class="v" id="selectedFolder">(none)</div>
        </div>
        <div class="pager">
          <button class="tb-btn" data-prev>Prev</button>
          <div class="tb-links" data-links></div>
          <button class="tb-btn" data-next>Next</button>
          <button class="tb-btn" id="scrollBottom" title="Scroll to bottom">‚Üì</button>
          <button class="tb-btn" id="scrollTop" title="Scroll to top">‚Üë</button>
        </div>
      </div>
    </header>

    <div class="ctx" id="ctx" hidden>
      <button class="ctx-item" id="ctxHide">Hide</button>
      <button class="ctx-item" id="ctxUnhide">Unhide</button>
      <button class="ctx-item" id="ctxRename">Rename‚Ä¶</button>
      <button class="ctx-item" id="ctxNewFolder">New folder‚Ä¶</button>
      <button class="ctx-item" id="ctxDelete">Delete</button>
      <button class="ctx-item" id="ctxMeta">Show metadata</button>
      <button class="ctx-item" id="ctxExplorer">Open in Explorer</button>
      <div class="ctx-sep"></div>
      <button class="ctx-item" id="ctxCut">Cut</button>
      <button class="ctx-item" id="ctxCopy">Copy</button>
      <button class="ctx-item" id="ctxPaste">Paste</button>
      <button class="ctx-item" id="ctxSelectAll">Select all</button>
      <button class="ctx-item" id="ctxSelectNone">Clear selection</button>
      <div class="ctx-sep"></div>
      <button class="ctx-item" id="ctxCancel">Cancel</button>
    </div>

    <div class="app-body">
      <main>

        <div class="masonry" id="mediaList"></div>


        <div class="loading" id="globalLoading">
          <div class="loading-card">
            <div class="spinner" aria-hidden="true"></div>
            <div class="loading-text" id="loadingText">Loading‚Ä¶</div>
            <div class="bar">
              <div class="bar-fill" id="loadingBar" style="width: 10%"></div>
            </div>
          </div>
        </div>
      </main>


    </div>

    <div class="lightbox" id="lightbox" hidden>
      <div class="lightbox-backdrop" id="lightboxBackdrop"></div>
      <div class="lightbox-ui">
        <button class="lb-btn" id="lbPrev" title="Previous (‚Üê)">‚Üê</button>
        <button class="lb-btn" id="lbNext" title="Next (‚Üí)">‚Üí</button>
        <button class="lb-btn lb-close" id="lbClose" title="Close (Esc)">‚úï</button>
      </div>
      <div class="lightbox-content">
        <img id="lightboxImg" alt="" />
        <video id="lightboxVideo" controls></video>
      </div>
    </div>

    <div class="modal" id="settingsModal" hidden>
      <div class="modal-backdrop" id="settingsBackdrop"></div>
      <div class="modal-card settings-modal-card">
        <div class="settings-sidebar">
          <div class="modal-title">Settings</div>
          <div class="settings-nav">
            <button class="settings-nav-item active" data-pane="general">General</button>
            <button class="settings-nav-item" data-pane="appearance">Appearance</button>
            <button class="settings-nav-item" data-pane="metadata">Metadata</button>
            <button class="settings-nav-item" data-pane="ai">AI</button>
          </div>
          <div class="modal-actions-sidebar">
            <button class="tb-btn" id="closeSettings">Close</button>
          </div>
        </div>

        <div class="settings-content">
          <!-- General Pane -->
          <div class="settings-pane" id="pane-general">
            <div class="pane-title">General</div>
            <label class="toggle">
              <input type="checkbox" id="toggleRandomize" />
              <span>Randomize gallery order</span>
            </label>
            <div class="field">
              <div class="field-label">Starting folder</div>
              <div class="field-row">
                <input class="text" id="startFolder" placeholder="(not set)" />
                <button class="tb-btn" id="browseStartFolder">Browse‚Ä¶</button>
              </div>
              <div class="field-actions">
                <button class="tb-btn highlight" id="loadStartFolderNow"
                  title="Load this folder now without restart">Load Now</button>
              </div>
            </div>
            <label class="toggle">
              <input type="checkbox" id="toggleRestoreLast" />
              <span>Restore previous folder on launch</span>
            </label>
            <label class="toggle">
              <input type="checkbox" id="toggleHideDot" />
              <span>Hide dot folders/files (starts with ‚Äú.‚Äù)</span>
            </label>
          </div>

          <!-- Appearance Pane -->
          <div class="settings-pane" id="pane-appearance" hidden>
            <div class="pane-title">Appearance</div>
            <label class="toggle">
              <input type="checkbox" id="toggleGlass" checked />
              <span>Enable glassmorphism</span>
            </label>
            <div class="field">
              <div class="field-label">Theme</div>
              <div class="segmented-control" id="themeRadioGroup">
                <input type="radio" name="theme_mode" value="dark" id="themeDark" checked />
                <label for="themeDark">Dark Mode</label>
                <input type="radio" name="theme_mode" value="light" id="themeLight" />
                <label for="themeLight">Light Mode</label>
              </div>
            </div>
            <div class="field">
              <div class="field-label">Accent color</div>
              <div class="field-row">
                <input class="color" type="color" id="accentColor" />
                <div class="hint">Applied to progress bars, links, and UI highlights.</div>
              </div>
            </div>
          </div>

          <!-- Metadata Pane -->
          <div class="settings-pane" id="pane-metadata" hidden>
            <div class="pane-title">Metadata</div>
            <div class="pane-subtitle">Choose which information to display in the metadata panel.</div>
            <div class="metadata-toggles">
              <label class="toggle">
                <input type="checkbox" id="metaShowRes" checked />
                <span>Resolution</span>
              </label>
              <label class="toggle">
                <input type="checkbox" id="metaShowSize" checked />
                <span>File Size</span>
              </label>
              <label class="toggle">
                <input type="checkbox" id="metaShowCamera" />
                <span>Camera Model</span>
              </label>
              <label class="toggle">
                <input type="checkbox" id="metaShowLocation" />
                <span>Location (GPS)</span>
              </label>
              <label class="toggle">
                <input type="checkbox" id="metaShowISO" />
                <span>ISO Speed</span>
              </label>
              <label class="toggle">
                <input type="checkbox" id="metaShowShutter" />
                <span>Shutter Speed</span>
              </label>
              <label class="toggle">
                <input type="checkbox" id="metaShowAperture" />
                <span>Aperture</span>
              </label>
              <label class="toggle">
                <input type="checkbox" id="metaShowSoftware" />
                <span>Software / Editor</span>
              </label>
              <label class="toggle">
                <input type="checkbox" id="metaShowLens" />
                <span>Lens Info</span>
              </label>
              <label class="toggle">
                <input type="checkbox" id="metaShowDPI" />
                <span>DPI</span>
              </label>
              <label class="toggle">
                <input type="checkbox" id="metaShowEmbeddedTags" />
                <span>Embedded-Tags</span>
              </label>
              <label class="toggle">
                <input type="checkbox" id="metaShowEmbeddedComments" />
                <span>Embedded-Comments</span>
              </label>
              <label class="toggle">
                <input type="checkbox" id="metaShowAIPrompt" />
                <span>Embedded-AI-Prompt</span>
              </label>
              <label class="toggle">
                <input type="checkbox" id="metaShowAIParams" />
                <span>Embedded-AI-Params</span>
              </label>
            </div>
          </div>

          <!-- AI Pane -->
          <div class="settings-pane" id="pane-ai" hidden>
            <div class="pane-title">AI</div>
            <div class="coming-soon">
              <div class="coming-soon-icon">ü§ñ</div>
              <p>AI-powered features like auto-tagging and face detection are coming soon!</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="scanIndicator" class="scan-indicator" hidden>
      <div class="scan-content">
        <div class="scan-text">
          <span class="scan-label">Scanning:</span>
          <span id="scanFile" class="scan-file">...</span>
        </div>
        <div class="scan-progress-container">
          <div id="scanBar" class="scan-bar"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- QWebChannel is provided by Qt; this path works in Qt WebEngine -->
  <script src="qrc:///qtwebchannel/qwebchannel.js"></script>
  <script src="app.js"></script>
</body>

</html>